<div class="container pt-5">
    <!-- Central Hub Section -->
    <div class="flex flex-wrap w-11 m-auto py-4 px-3">
        <div data-aos="fade-in" data-aos-delay="100" class="w-full lg:w-auto text-center lg:text-left mb-3 lg:mb-0">
            <h2 class="text-lg md:text-2xl lg:text-3xl mb-1">Requested Products</h2>
            <p class="primary-color text-xs md:text-sm">together for a better future</p>
        </div>

        <div class="flex flex-wrap lg:ml-auto lg:w-8 md:w-full justify-content-between align-items-center">
            <div class="flex align-items-center lg:w-4 md:w-4 sm:w-6" data-aos="fade-in" data-aos-delay="100">
                <i class="pi pi-chart-line pr-2 primary-color icon-responsive"></i>
                <div>
                    <h3 class="primary-color text-base md:text-lg lg:text-xl">
                        {{ productsMade | number }}+
                    </h3>
                    <p class="text-2xs md:text-xs m-0">Products made on request</p>
                </div>
            </div>

            <div class="flex align-items-center lg:w-4 md:w-4 sm:w-6" data-aos="fade-in" data-aos-delay="500">
                <i class="pi pi-gauge pr-2 primary-color icon-responsive"></i>
                <div>
                    <h3 class="primary-color text-base md:text-lg lg:text-xl">
                        {{ productsWaiting | number }}+
                    </h3>
                    <p class="text-2xs md:text-xs m-0">Products waiting for upvotes</p>
                </div>
            </div>

            <div class="flex align-items-center lg:w-4 md:w-4 sm:w-6" data-aos="fade-in" data-aos-delay="1000">
                <i class="pi pi-warehouse pr-2 primary-color icon-responsive"></i>
                <div>
                    <h3 class="primary-color text-base md:text-lg lg:text-xl">
                        {{ factoriesHelping | number }}+
                    </h3>
                    <p class="text-2xs md:text-xs m-0">Factories making dreams come true</p>
                </div>
            </div>
        </div>
    </div>


    <!-- Request Box -->
    <div class="request-box p-4 mb-5" data-aos="fade-in" data-aos-delay="1500">
        <!-- <div class="flex flex-wrap">
            <div>
            <h3 class="pl-2 text-base md:text-lg">Products requested by buyers <br> and are not in the Market</h3>
            <p class="mb-3 pl-2 pt-1">Upvote the products you like to make them real.</p>
                </div> -->
            <!-- Filters -->

        <!-- </div> -->

          <div class="categories flex flex-wrap gap-2 pt-2 px-2 pb-3">
    @for (cat of categories; track $index) {
      <button 
        class="category-chip"
        (click)="selectCategory(cat)" 
        [class.active]="cat === selectedCategory">
        {{ cat }}
      </button>
    }
                <div class="flex flex-wrap ml-auto">
                <!-- Search Bar -->
                <div class="ml-auto w-full">
                    <div class="search-content">
                        <!-- <p-inputgroup class="w-11 m-auto border-round-2xl"> -->
                        <div class="flex lg:w-full md:w-6 sm:w-6 search">
                            <input placeholder="Search..." [(ngModel)]="searchInput"
                                (ngModelChange)="onSearchChange($event)" />
                            <button variant="text" (click)="applySearch()"><i class="pi pi-search"></i></button>
                            <button class="addFormBtn ml-2" (click)="toForm()" [disabled]="role != `user`? true: false"> <i class="pi pi-plus cursor-pointer" pTooltip="Request Product" tooltipPosition="top"></i></button>
                        </div>
                    </div>
                </div>
            </div>
  </div>

        <!-- Display requested products -->
    <!-- Selected Category Image -->
    <!-- <div class="w-3 categories-title">
      <img [src]="categoryImages[selectedCategory]" [alt]="selectedCategory" />
    </div> -->

    <!-- Product Cards -->
<div class="products-grid w-full flex">
  @if (filteredRequestedProducts.length > 0) {
    <div class="w-full flex flex-wrap">
      @for (item of filteredRequestedProducts; track item.id) {
        <div class="w-full sm:w-6 lg:w-3 p-2" data-aos="fade-up" data-aos-delay="200">
          <app-new-requested-card [product]="item"></app-new-requested-card>
        </div>
      }
    </div>
  } @else {
    <p class="empty-state py-8 center">No products available in this category.</p>
  }
</div>

        <!-- Pagination -->
        <!-- <p-paginator (onPageChange)="onPageChange($event)" [first]="first" [rows]="rows" [totalRecords]="120"
            [rowsPerPageOptions]="[10, 20, 30]" class="mt-4 text-sm" /> -->
    </div>
</div>

<!-- Request Product CTA -->
<div class="requset-product py-7 mt-5 px-5 md:px-6 flex flex-wrap justify-content-between align-items-center gap-3"
    data-aos="zoom-in" data-aos-delay="0">
    <div class="w-full md:w-auto text-center md:text-left">
        <h2 class="text-base md:text-xl lg:text-2xl mb-1" data-aos="fade-in" data-aos-delay="300">
            Canâ€™t find the product you want?
        </h2>
        <h2 class="text-base md:text-xl lg:text-2xl" data-aos="fade-out" data-aos-delay="300">
            Submit a request for a product with ease!
        </h2>
    </div>
    <div class="w-full md:w-auto text-center md:text-left">
        <button class="btn btn-primary py-2 px-3 text-sm md:py-3 md:px-5 md:text-base w-full md:w-auto"
            (click)="toForm()">
            Request Product Form
        </button>
    </div>
</div>